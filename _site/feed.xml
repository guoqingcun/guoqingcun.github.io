<?xml version="1.0" encoding="UTF-8"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>郭清存随笔</title>
    <description>My name is Qingcun Guo(郭清存). You can call me Grace. I was born in 1985s.
I am an IT developer focusing on web technology. Now I am employed by 24xiaomai.com as an java engineer.
In spare time, I like reading book, surfing internet, watching movie. 
</description>
    <link>http://localhost:4000/</link>
    <atom:link href="http://localhost:4000/feed.xml" rel="self" type="application/rss+xml"/>
    <pubDate>Tue, 07 Aug 2018 22:16:48 +0800</pubDate>
    <lastBuildDate>Tue, 07 Aug 2018 22:16:48 +0800</lastBuildDate>
    <generator>Jekyll v3.7.3</generator>
    
      <item>
        <title>hadoop 3.0.3集群安装</title>
        <description>&lt;hr /&gt;

&lt;h3 id=&quot;环境&quot;&gt;环境&lt;/h3&gt;
&lt;p&gt;linux：CentOS 7&lt;br /&gt;
sun java version “1.8.0_144”&lt;br /&gt;
安装ssh，并设置免密&lt;br /&gt;
hadoop-3.0.3.tar.gz&lt;br /&gt;
用户root&lt;br /&gt;
虚拟机 : VMware&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;192.168.1.135 master&lt;/li&gt;
  &lt;li&gt;192.168.1.120 slave1&lt;/li&gt;
  &lt;li&gt;192.168.1.182 slave2&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;strong&gt;为本台机子命名&lt;/strong&gt;&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;vim /etc/hostname&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;如图:&lt;/p&gt;
&lt;div&gt;
&lt;img src=&quot;/images/bigdata/hadoop/cluster-setup/1.jpg&quot; title=&quot;&quot; /&gt;
&lt;/div&gt;

&lt;p&gt;&lt;strong&gt;配置三台机子的hosts&lt;/strong&gt;&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;vim /etc/hosts&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;如图:&lt;/p&gt;
&lt;div align=&quot;center&quot;&gt;
&lt;img src=&quot;/images/bigdata/hadoop/cluster-setup/2.jpg&quot; title=&quot;&quot; /&gt;
&lt;/div&gt;

&lt;p&gt;注意：注释掉127.0.0.0,::1 localhost&lt;/p&gt;

&lt;p&gt;如上操作后，reboot三台机子&lt;/p&gt;

&lt;h3 id=&quot;配置本台机子ssh&quot;&gt;配置本台机子ssh&lt;/h3&gt;

&lt;p&gt;root用户登录后，如下操作&lt;/p&gt;
&lt;blockquote&gt;
  &lt;p&gt;ssh-keygen -t rsa -P ‘’&lt;br /&gt;
描述:生成无密码的公钥/私钥对,生成的文件在当前用户的.ssh目录下&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;如图&lt;/p&gt;
&lt;div align=&quot;center&quot;&gt;
&lt;img src=&quot;/images/bigdata/hadoop/cluster-setup/3.jpg&quot; title=&quot;&quot; /&gt;
&lt;/div&gt;

&lt;p&gt;接下来将公钥添加到authorzied_keys文件里&lt;/p&gt;
&lt;blockquote&gt;
  &lt;p&gt;cat /root/.ssh/id_rsa.pub &amp;gt; /root/.ssh/authorized_keys&lt;/p&gt;
&lt;/blockquote&gt;
&lt;div align=&quot;center&quot;&gt;
&lt;img src=&quot;/images/bigdata/hadoop/cluster-setup/4.jpg&quot; title=&quot;&quot; /&gt;
&lt;/div&gt;
&lt;p&gt;把authorzied_keys复制到其它两台slave机子中&lt;/p&gt;
&lt;blockquote&gt;
  &lt;p&gt;scp authorzied_keys slave1:/root/.ssh/authorzied_keys&lt;br /&gt;
scp authorzied_keys slave1:/root/.ssh/authorzied_keys&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;第一次slave1和slave2使用scp时,会出现如下字样.&lt;/p&gt;
&lt;blockquote&gt;
  &lt;p&gt;Are you sure you want to continue connecting(yes/no)?&lt;br /&gt;
输入yes,以示确定。回车。以后就可以快速无需密码连接。&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h3 id=&quot;三台机子上安装sun-java-version-180_144&quot;&gt;三台机子上安装sun java version “1.8.0_144”&lt;/h3&gt;
&lt;blockquote&gt;
  &lt;p&gt;安装过程略.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;blockquote&gt;
  &lt;p&gt;安装目录:/export/java/jdk1.8.0_144&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;&lt;strong&gt;配置profile:vim /etc/profile&lt;/strong&gt;&lt;/p&gt;
&lt;blockquote&gt;

  &lt;p&gt;#oracle jdk start&lt;br /&gt;
export JAVA_HOME=/export/java/jdk1.8.0_144&lt;br /&gt;
export JRE_HOME=${JAVA_HOME}/jre&lt;br /&gt;
export CLASSPATH=.:${JAVA_HOME}/lib:${JRE_HOME}/lib&lt;br /&gt;
export PATH=${JAVA_HOME}/bin:$PATH&lt;br /&gt;
#oracle jdk end&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;如上配置后,执行:&lt;/p&gt;
&lt;blockquote&gt;
  &lt;p&gt;source /etc/profile&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h3 id=&quot;在master安装hadoop&quot;&gt;在master安装hadoop&lt;/h3&gt;

&lt;blockquote&gt;
  &lt;p&gt;解压:tar -zxvf hadoop-3.0.3.tar.gz&lt;br /&gt;
解压目录:/export/hadoop3&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h3 id=&quot;配置hadoop&quot;&gt;配置hadoop&lt;/h3&gt;

&lt;p&gt;三台机子配置profile:vim /etc/profile&lt;/p&gt;
&lt;blockquote&gt;

  &lt;p&gt;#hadoop start&lt;br /&gt;
export HADOOP_PREFIX=/export/hadoop3&lt;br /&gt;
export PATH=$PATH:$HADOOP_PREFIX/bin&lt;br /&gt;
export PATH=$PATH:$HADOOP_PREFIX/sbin&lt;br /&gt;
#hadoop end&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;如上配置后，执行:&lt;/p&gt;
&lt;blockquote&gt;
  &lt;p&gt;source /etc/profile&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;接下来配置master上的hadoop文件.需要配置如下几个文件&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;hadoop-env.sh&lt;/li&gt;
  &lt;li&gt;core-site.xml&lt;/li&gt;
  &lt;li&gt;hdfs-site.xml&lt;/li&gt;
  &lt;li&gt;mapred-site.xml&lt;/li&gt;
  &lt;li&gt;yarn-site.xml&lt;/li&gt;
  &lt;li&gt;workers&lt;/li&gt;
&lt;/ul&gt;

&lt;h4 id=&quot;hadoop-envsh&quot;&gt;hadoop-env.sh&lt;/h4&gt;
&lt;blockquote&gt;
  &lt;p&gt;vim /export/hadoop3/etc/hadoop/hadoop-env.sh&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;配置内容:&lt;/p&gt;
&lt;blockquote&gt;

  &lt;p&gt;export JAVA_HOME=/export/java/jdk1.8.0_144&lt;br /&gt;
export HDFS_NAMENODE_USER=root&lt;br /&gt;
export HDFS_DATANODE_USER=root&lt;br /&gt;
export HDFS_SECONDARYNAMENODE_USER=root&lt;br /&gt;
export YARN_RESOURCEMANAGER_USER=root&lt;br /&gt;
export YARN_NODEMANAGER_USER=root&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h4 id=&quot;core-sitexml&quot;&gt;core-site.xml&lt;/h4&gt;
&lt;blockquote&gt;
  &lt;p&gt;vim /export/hadoop3/etc/hadoop/core-site.xml&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;配置内容:&lt;/p&gt;
&lt;div class=&quot;language-xml highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nt&quot;&gt;&amp;lt;configuration&amp;gt;&lt;/span&gt;
        &lt;span class=&quot;nt&quot;&gt;&amp;lt;property&amp;gt;&lt;/span&gt;
            &lt;span class=&quot;nt&quot;&gt;&amp;lt;name&amp;gt;&lt;/span&gt;fs.defaultFS&lt;span class=&quot;nt&quot;&gt;&amp;lt;/name&amp;gt;&lt;/span&gt;
            &lt;span class=&quot;nt&quot;&gt;&amp;lt;value&amp;gt;&lt;/span&gt;hdfs://master:9000&lt;span class=&quot;nt&quot;&gt;&amp;lt;/value&amp;gt;&lt;/span&gt;
        &lt;span class=&quot;nt&quot;&gt;&amp;lt;/property&amp;gt;&lt;/span&gt;
        &lt;span class=&quot;c&quot;&gt;&amp;lt;!-- 指定hadoop运行时产生文件的存储目录 --&amp;gt;&lt;/span&gt;
        &lt;span class=&quot;nt&quot;&gt;&amp;lt;property&amp;gt;&lt;/span&gt;
            &lt;span class=&quot;nt&quot;&gt;&amp;lt;name&amp;gt;&lt;/span&gt;hadoop.tmp.dir&lt;span class=&quot;nt&quot;&gt;&amp;lt;/name&amp;gt;&lt;/span&gt;
            &lt;span class=&quot;nt&quot;&gt;&amp;lt;value&amp;gt;&lt;/span&gt;/export/hadoop3/tmp&lt;span class=&quot;nt&quot;&gt;&amp;lt;/value&amp;gt;&lt;/span&gt;
        &lt;span class=&quot;nt&quot;&gt;&amp;lt;/property&amp;gt;&lt;/span&gt;
&lt;span class=&quot;nt&quot;&gt;&amp;lt;/configuration&amp;gt;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h4 id=&quot;hdfs-sitexml&quot;&gt;hdfs-site.xml&lt;/h4&gt;
&lt;blockquote&gt;
  &lt;p&gt;vim /export/hadoop3/etc/hadoop/hdfs-site.xml&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;配置内容:&lt;/p&gt;
&lt;div class=&quot;language-xml highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nt&quot;&gt;&amp;lt;configuration&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;nt&quot;&gt;&amp;lt;property&amp;gt;&lt;/span&gt;
        &lt;span class=&quot;nt&quot;&gt;&amp;lt;name&amp;gt;&lt;/span&gt;dfs.replication&lt;span class=&quot;nt&quot;&gt;&amp;lt;/name&amp;gt;&lt;/span&gt;
        &lt;span class=&quot;nt&quot;&gt;&amp;lt;value&amp;gt;&lt;/span&gt;2&lt;span class=&quot;nt&quot;&gt;&amp;lt;/value&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;nt&quot;&gt;&amp;lt;/property&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;nt&quot;&gt;&amp;lt;property&amp;gt;&lt;/span&gt;
        &lt;span class=&quot;nt&quot;&gt;&amp;lt;name&amp;gt;&lt;/span&gt;dfs.name.dir&lt;span class=&quot;nt&quot;&gt;&amp;lt;/name&amp;gt;&lt;/span&gt;
        &lt;span class=&quot;nt&quot;&gt;&amp;lt;value&amp;gt;&lt;/span&gt;/export/hadoop3/hdfs/name&lt;span class=&quot;nt&quot;&gt;&amp;lt;/value&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;nt&quot;&gt;&amp;lt;/property&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;nt&quot;&gt;&amp;lt;property&amp;gt;&lt;/span&gt;
        &lt;span class=&quot;nt&quot;&gt;&amp;lt;name&amp;gt;&lt;/span&gt;dfs.data.dir&lt;span class=&quot;nt&quot;&gt;&amp;lt;/name&amp;gt;&lt;/span&gt;
        &lt;span class=&quot;nt&quot;&gt;&amp;lt;value&amp;gt;&lt;/span&gt;/export/hadoop3/hdfs/data&lt;span class=&quot;nt&quot;&gt;&amp;lt;/value&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;nt&quot;&gt;&amp;lt;/property&amp;gt;&lt;/span&gt;
&lt;span class=&quot;nt&quot;&gt;&amp;lt;/configuration&amp;gt;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;h4 id=&quot;mapred-sitexml&quot;&gt;mapred-site.xml&lt;/h4&gt;
&lt;blockquote&gt;
  &lt;p&gt;vim /export/hadoop3/etc/hadoop/mapred-site.xml&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;配置内容:&lt;/p&gt;
&lt;div class=&quot;language-xml highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nt&quot;&gt;&amp;lt;configuration&amp;gt;&lt;/span&gt;
   &lt;span class=&quot;nt&quot;&gt;&amp;lt;property&amp;gt;&lt;/span&gt;
        &lt;span class=&quot;nt&quot;&gt;&amp;lt;name&amp;gt;&lt;/span&gt;mapred.job.tracker&lt;span class=&quot;nt&quot;&gt;&amp;lt;/name&amp;gt;&lt;/span&gt;
        &lt;span class=&quot;nt&quot;&gt;&amp;lt;value&amp;gt;&lt;/span&gt;http://master:9001&lt;span class=&quot;nt&quot;&gt;&amp;lt;/value&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;nt&quot;&gt;&amp;lt;/property&amp;gt;&lt;/span&gt;

   &lt;span class=&quot;nt&quot;&gt;&amp;lt;property&amp;gt;&lt;/span&gt;
        &lt;span class=&quot;nt&quot;&gt;&amp;lt;name&amp;gt;&lt;/span&gt;mapreduce.framework.name&lt;span class=&quot;nt&quot;&gt;&amp;lt;/name&amp;gt;&lt;/span&gt;
        &lt;span class=&quot;nt&quot;&gt;&amp;lt;value&amp;gt;&lt;/span&gt;yarn&lt;span class=&quot;nt&quot;&gt;&amp;lt;/value&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;nt&quot;&gt;&amp;lt;/property&amp;gt;&lt;/span&gt;

    &lt;span class=&quot;nt&quot;&gt;&amp;lt;property&amp;gt;&lt;/span&gt;
         &lt;span class=&quot;nt&quot;&gt;&amp;lt;name&amp;gt;&lt;/span&gt;mapreduce.application.classpath&lt;span class=&quot;nt&quot;&gt;&amp;lt;/name&amp;gt;&lt;/span&gt;
         &lt;span class=&quot;nt&quot;&gt;&amp;lt;value&amp;gt;&lt;/span&gt;
             /export/hadoop3/etc/hadoop,
             /export/hadoop3/share/hadoop/common/*,
             /export/hadoop3/share/hadoop/common/lib/*,
             /export/hadoop3/share/hadoop/hdfs/*,
             /export/hadoop3/share/hadoop/hdfs/lib/*,
             /export/hadoop3/share/hadoop/mapreduce/*,
             /export/hadoop3/share/hadoop/mapreduce/lib/*,
             /export/hadoop3/share/hadoop/yarn/*,
             /export/hadoop3/share/hadoop/yarn/lib/*
         &lt;span class=&quot;nt&quot;&gt;&amp;lt;/value&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;nt&quot;&gt;&amp;lt;/property&amp;gt;&lt;/span&gt;

&lt;span class=&quot;nt&quot;&gt;&amp;lt;/configuration&amp;gt;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;h4 id=&quot;yarn-sitexml&quot;&gt;yarn-site.xml&lt;/h4&gt;
&lt;blockquote&gt;
  &lt;p&gt;vim /export/hadoop3/etc/hadoop/yarn-site.xml&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;配置内容:&lt;/p&gt;
&lt;div class=&quot;language-xml highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nt&quot;&gt;&amp;lt;configuration&amp;gt;&lt;/span&gt;

&lt;span class=&quot;c&quot;&gt;&amp;lt;!-- Site specific YARN configuration properties --&amp;gt;&lt;/span&gt;

     &lt;span class=&quot;nt&quot;&gt;&amp;lt;property&amp;gt;&lt;/span&gt;
          &lt;span class=&quot;nt&quot;&gt;&amp;lt;name&amp;gt;&lt;/span&gt;yarn.nodemanager.aux-services&lt;span class=&quot;nt&quot;&gt;&amp;lt;/name&amp;gt;&lt;/span&gt;
          &lt;span class=&quot;nt&quot;&gt;&amp;lt;value&amp;gt;&lt;/span&gt;mapreduce_shuffle&lt;span class=&quot;nt&quot;&gt;&amp;lt;/value&amp;gt;&lt;/span&gt;
     &lt;span class=&quot;nt&quot;&gt;&amp;lt;/property&amp;gt;&lt;/span&gt;
     &lt;span class=&quot;nt&quot;&gt;&amp;lt;property&amp;gt;&lt;/span&gt;
           &lt;span class=&quot;nt&quot;&gt;&amp;lt;name&amp;gt;&lt;/span&gt;yarn.resourcemanager.address&lt;span class=&quot;nt&quot;&gt;&amp;lt;/name&amp;gt;&lt;/span&gt;
           &lt;span class=&quot;nt&quot;&gt;&amp;lt;value&amp;gt;&lt;/span&gt;master:8032&lt;span class=&quot;nt&quot;&gt;&amp;lt;/value&amp;gt;&lt;/span&gt;
     &lt;span class=&quot;nt&quot;&gt;&amp;lt;/property&amp;gt;&lt;/span&gt;
     &lt;span class=&quot;nt&quot;&gt;&amp;lt;property&amp;gt;&lt;/span&gt;
          &lt;span class=&quot;nt&quot;&gt;&amp;lt;name&amp;gt;&lt;/span&gt;yarn.resourcemanager.scheduler.address&lt;span class=&quot;nt&quot;&gt;&amp;lt;/name&amp;gt;&lt;/span&gt;
          &lt;span class=&quot;nt&quot;&gt;&amp;lt;value&amp;gt;&lt;/span&gt;master:8030&lt;span class=&quot;nt&quot;&gt;&amp;lt;/value&amp;gt;&lt;/span&gt;
      &lt;span class=&quot;nt&quot;&gt;&amp;lt;/property&amp;gt;&lt;/span&gt;
     &lt;span class=&quot;nt&quot;&gt;&amp;lt;property&amp;gt;&lt;/span&gt;
         &lt;span class=&quot;nt&quot;&gt;&amp;lt;name&amp;gt;&lt;/span&gt;yarn.resourcemanager.resource-tracker.address&lt;span class=&quot;nt&quot;&gt;&amp;lt;/name&amp;gt;&lt;/span&gt;
         &lt;span class=&quot;nt&quot;&gt;&amp;lt;value&amp;gt;&lt;/span&gt;master:8031&lt;span class=&quot;nt&quot;&gt;&amp;lt;/value&amp;gt;&lt;/span&gt;
     &lt;span class=&quot;nt&quot;&gt;&amp;lt;/property&amp;gt;&lt;/span&gt;
     &lt;span class=&quot;nt&quot;&gt;&amp;lt;property&amp;gt;&lt;/span&gt;
         &lt;span class=&quot;nt&quot;&gt;&amp;lt;name&amp;gt;&lt;/span&gt;yarn.resourcemanager.admin.address&lt;span class=&quot;nt&quot;&gt;&amp;lt;/name&amp;gt;&lt;/span&gt;
         &lt;span class=&quot;nt&quot;&gt;&amp;lt;value&amp;gt;&lt;/span&gt;master:8033&lt;span class=&quot;nt&quot;&gt;&amp;lt;/value&amp;gt;&lt;/span&gt;
     &lt;span class=&quot;nt&quot;&gt;&amp;lt;/property&amp;gt;&lt;/span&gt;
     &lt;span class=&quot;nt&quot;&gt;&amp;lt;property&amp;gt;&lt;/span&gt;
         &lt;span class=&quot;nt&quot;&gt;&amp;lt;name&amp;gt;&lt;/span&gt;yarn.resourcemanager.webapp.address&lt;span class=&quot;nt&quot;&gt;&amp;lt;/name&amp;gt;&lt;/span&gt;
         &lt;span class=&quot;nt&quot;&gt;&amp;lt;value&amp;gt;&lt;/span&gt;master:8088&lt;span class=&quot;nt&quot;&gt;&amp;lt;/value&amp;gt;&lt;/span&gt;
     &lt;span class=&quot;nt&quot;&gt;&amp;lt;/property&amp;gt;&lt;/span&gt;

&lt;span class=&quot;nt&quot;&gt;&amp;lt;/configuration&amp;gt;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;h4 id=&quot;workers&quot;&gt;workers&lt;/h4&gt;
&lt;blockquote&gt;
  &lt;p&gt;vim /export/hadoop3/etc/hadoop/workers&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;配置内容:&lt;/p&gt;
&lt;div class=&quot;language-xml highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;slave1
slave2
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h4 id=&quot;同步master上的hadoop环境&quot;&gt;同步master上的hadoop环境&lt;/h4&gt;
&lt;blockquote&gt;

  &lt;p&gt;scp /export/hadoop3 slave1:/export/&lt;br /&gt;
scp /export/hadoop3 slave2:/export/&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;等上述命令执行完后，hadoop的环境就完安装和配置完成&lt;/p&gt;

&lt;h3 id=&quot;格式化namenode&quot;&gt;格式化namenode&lt;/h3&gt;
&lt;p&gt;在启动hadoop前，先要格式化namenode&lt;/p&gt;
&lt;blockquote&gt;
  &lt;p&gt;hadoop namenode -format&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h3 id=&quot;启动hadoop&quot;&gt;启动hadoop&lt;/h3&gt;
&lt;blockquote&gt;
  &lt;p&gt;start-all.sh&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;执行上述命令完成后，使用jps命令在三台机子上查看启动的进程.&lt;/p&gt;
&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;master上需要启动如下进程
	- NameNode
	- SecondaryNameNode
	- ResourceManager
slave1上需要启动如下进程
	- NodeManager
	- DataNode
slave2上需要启动如下进程
	- NodeManager
	- DataNode
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;如果进程启动无误，到此hadoop集群安装成功&lt;/p&gt;

&lt;h3 id=&quot;hadoop上的hello-world&quot;&gt;hadoop上的hello world&lt;/h3&gt;

&lt;p&gt;创建两个文件,操作如下&lt;/p&gt;
&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;mkdir /export/file
echo &quot;hello world hello hadoop&quot; &amp;gt; /export/file/file1.txt
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;创建hadoop的输入目录且把file1.txt文件上传到此&lt;/p&gt;
&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;hadoop dfs -mkdir /input
hadoop dfs -put /export/file/file1.txt /input
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;环境已经准备OK，那就可以跑第一个应用(单词计数功能)喽.&lt;/p&gt;
&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;hadoop jar /export/hadoop3/share/hadoop/mapreduce/hadoop-mapreduce-examples-3.0.3.jar wordcount hdfs://master:9000/input/file1.txt   hdfs://master:9000/output/
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;如果执行命令无误，可以通过如下命令查看输出结果&lt;/p&gt;
&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;hadoop dfs -ls /output/
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;输出结果：&lt;/p&gt;
&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;-rw-r--r--   2 root supergroup          0 2018-08-07 17:43 /output/_SUCCESS
-rw-r--r--   2 root supergroup         42 2018-08-07 17:43 /output/part-r-00000
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;查看输出内容&lt;/p&gt;
&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;hadoop dfs -cat /output/part-r-00000  
world   1
Hello   2
hadoop  1
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;blockquote&gt;

  &lt;p&gt;&lt;small&gt;本文总阅读量&lt;span id=&quot;busuanzi_value_page_pv&quot;&gt;&lt;/span&gt;次&lt;/small&gt;&lt;/p&gt;
&lt;/blockquote&gt;
</description>
        <pubDate>Tue, 07 Aug 2018 20:06:17 +0800</pubDate>
        <link>http://localhost:4000/2018/08/07/bigdata-hadoop-cluster-setup.html</link>
        <guid isPermaLink="true">http://localhost:4000/2018/08/07/bigdata-hadoop-cluster-setup.html</guid>
        
        
        <category>大数据</category>
        
      </item>
    
      <item>
        <title>神泉峡一日游</title>
        <description>&lt;hr /&gt;

&lt;h2 id=&quot;神泉峡&quot;&gt;神泉峡&lt;/h2&gt;

&lt;p&gt;神泉峡风景区位于北京市门头沟区妙峰山镇碳厂村西1公里处，面积约15平方公里。距北京市区约45公里。以山水田园风光为主题，集采摘、登山、野炊、休闲为一体。&lt;/p&gt;

&lt;h2 id=&quot;演员表&quot;&gt;演员表&lt;/h2&gt;

&lt;p&gt;穆红、刘军、李逍瑶 and me&lt;/p&gt;

&lt;h2 id=&quot;时间&quot;&gt;时间&lt;/h2&gt;

&lt;p&gt;2018-05-20 早晨6：30&lt;/p&gt;

&lt;h3 id=&quot;出发&quot;&gt;出发&lt;/h3&gt;

&lt;p&gt;早晨睁开眼，迷迷瞪瞪,看了下手机时间–5:50。自我暗示道“再睡十分钟马上起”，再次睁开眼时已经6：03，更衣、出宫，快快快。定好6：30集合，虽然距离集合地仅需5分钟，但时间依然紧张。捯饬好自己，背上双肩包，风一样跑了一半的路，心里正琢磨着“不运动，体力跟不上了吧”，此时穆姐来了电话.&lt;/p&gt;

&lt;blockquote&gt;

  &lt;ul&gt;
    &lt;li&gt;穆：“郭走到哪了？”&lt;/li&gt;
    &lt;li&gt;我：“穆姐，马上，等我三四分钟”.&lt;/li&gt;
    &lt;li&gt;心理: “第一次约出去玩，迟到了，该反省反省”.&lt;/li&gt;
  &lt;/ul&gt;
&lt;/blockquote&gt;

&lt;p&gt;翻过天桥，直奔穆姐开着双闪的车而去，一路聊坎驶向神泉峡。&lt;/p&gt;

&lt;h3 id=&quot;集合&quot;&gt;集合&lt;/h3&gt;

&lt;p&gt;天气阴沉沉，但空气非常好，山中更是好出奇。7：40达到了神泉峡景区。刘姐和李姐8点多点陆续到达。刘姐下车时，感觉有点不对，说是”晕车了”，简单的交流后，我和刘姐换了下车(李姐SUV)，继续前行2公里到达停车场。&lt;/p&gt;

&lt;h3 id=&quot;上厕所&quot;&gt;上厕所&lt;/h3&gt;

&lt;p&gt;哇～的一声，吸引了几人目光，好多的”茉莉芽”。什么是”茉莉芽”?,在此我打个问号，因为我也不知道。后来根据几位姐的官方说明，大致了解到是一个种食用的野菜，看她们求之若渴的行动和描述应该是一种非常好吃的野菜。&lt;/p&gt;

&lt;h3 id=&quot;爬山&quot;&gt;爬山&lt;/h3&gt;

&lt;p&gt;爬过的几座山，有水，有泉的在北京不多见(没去过几个地)。转身有水，扭头有泉，有山有水好地方。刚走300多米，有个小瀑布,名曰”飞来瀑”,至此开起拍照模式，一路无话。有图有真像，上图。&lt;/p&gt;

&lt;p&gt;&lt;br /&gt;&lt;/p&gt;
&lt;div align=&quot;center&quot;&gt;
&lt;img src=&quot;/images/travel/shenquanxia/1.jpg&quot; title=&quot;&quot; /&gt;
&lt;/div&gt;
&lt;p&gt;&lt;br /&gt;&lt;/p&gt;

&lt;div align=&quot;center&quot;&gt;
&lt;img src=&quot;/images/travel/shenquanxia/2.jpg&quot; title=&quot;&quot; /&gt;
&lt;/div&gt;
&lt;p&gt;&lt;br /&gt;&lt;/p&gt;
&lt;div align=&quot;center&quot;&gt;
&lt;img src=&quot;/images/travel/shenquanxia/3.jpg&quot; title=&quot;&quot; /&gt;
&lt;/div&gt;
&lt;p&gt;&lt;br /&gt;&lt;/p&gt;
&lt;div align=&quot;center&quot;&gt;
&lt;img src=&quot;/images/travel/shenquanxia/4.jpg&quot; title=&quot;&quot; /&gt;
&lt;/div&gt;
&lt;p&gt;&lt;br /&gt;&lt;/p&gt;
&lt;div align=&quot;center&quot;&gt;
&lt;img src=&quot;/images/travel/shenquanxia/5.jpg&quot; title=&quot;&quot; /&gt;
&lt;/div&gt;
&lt;p&gt;&lt;br /&gt;&lt;/p&gt;
&lt;div align=&quot;center&quot;&gt;
&lt;img src=&quot;/images/travel/shenquanxia/6.jpg&quot; title=&quot;&quot; /&gt;
&lt;/div&gt;
&lt;p&gt;&lt;br /&gt;&lt;/p&gt;
&lt;div align=&quot;center&quot;&gt;
&lt;img src=&quot;/images/travel/shenquanxia/7.jpg&quot; title=&quot;&quot; /&gt;
&lt;/div&gt;

&lt;h3 id=&quot;山中迎风亭&quot;&gt;山中迎风亭&lt;/h3&gt;

&lt;p&gt;亭子没有名字，因为被风吹的很冷，我就给他取名叫”迎风亭”.亭子很棒，山中景尽收眼底，四面喊山的声音不断，”有人嘛…,你们是穿山甲嘛…，快来呀，这边有吃的…“。肚中小饿，四位好汉开始用膳，一只童子鸡，四个香瓜，四个小梨，花生，饼干，沙琪玛等等。短暂的用膳后，继续爬山模式，略有不同的是，片刻之后山中已带雨(小细雨)。&lt;/p&gt;

&lt;h3 id=&quot;茉莉芽&quot;&gt;茉莉芽&lt;/h3&gt;

&lt;p&gt;下山后，才是今天的主场–摘茉莉芽
登高，趴地，踩空，雨中奋战两小时有余，一身水来，一脚泥。小包大包满满的茉莉芽，外加几片花椒叶(很嫩很香)。&lt;/p&gt;

&lt;h3 id=&quot;回城&quot;&gt;回城&lt;/h3&gt;

&lt;p&gt;穆姐coffee提神开车，偶小睡一觉（实在是困）.
&lt;br /&gt;&lt;/p&gt;
&lt;div align=&quot;center&quot;&gt;
&lt;img src=&quot;/images/travel/shenquanxia/8.jpg&quot; title=&quot;&quot; /&gt;
&lt;/div&gt;
&lt;p&gt;&lt;br /&gt;&lt;/p&gt;
&lt;div align=&quot;center&quot;&gt;
&lt;img src=&quot;/images/travel/shenquanxia/9.jpg&quot; title=&quot;&quot; /&gt;
&lt;/div&gt;
&lt;blockquote&gt;

  &lt;p&gt;&lt;small&gt;本文总阅读量&lt;span id=&quot;busuanzi_value_page_pv&quot;&gt;&lt;/span&gt;次&lt;/small&gt;&lt;/p&gt;
&lt;/blockquote&gt;
</description>
        <pubDate>Mon, 21 May 2018 20:23:17 +0800</pubDate>
        <link>http://localhost:4000/2018/05/21/travel-chain-shenquanxia.html</link>
        <guid isPermaLink="true">http://localhost:4000/2018/05/21/travel-chain-shenquanxia.html</guid>
        
        
        <category>喜好</category>
        
      </item>
    
      <item>
        <title>NoClassDefFoundError与ClassNotFoundException两者的不同</title>
        <description>&lt;hr /&gt;

&lt;h3 id=&quot;noclassdeffounderror&quot;&gt;NoClassDefFoundError&lt;/h3&gt;
&lt;p&gt;首先看看NoClassDefFoundError的继承关系。&lt;/p&gt;

&lt;pre&gt;
 java.lang.Object
      java.lang.Throwable
         java.lang.Error
            java.lang.LinkageError
                java.lang.NoClassDefFoundError
&lt;/pre&gt;

&lt;p&gt;了解NoClassDefFoundError之前，先看看它的大佬,老大及其自身的含义.&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;Error:所谓的Error及其子类，代表的是不期望恢复的错误。&lt;/li&gt;
  &lt;li&gt;LinkageError:LinkageError及其子类，代表编译时OK，之后被做了改动。&lt;/li&gt;
  &lt;li&gt;NoClassDefFoundError:Java虚拟机或类加载器试着加载类定义时，未能找到类定义。这种错误是由于编译通过后，但运行时未能找到类定义导致。&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;从它的继承关系上看，可以得知NoClassDefFoundError是一个不能被恢复错误，究其原因是编译后的字节码加载时找不到类定义。&lt;/p&gt;

&lt;h3 id=&quot;classnotfoundexception&quot;&gt;ClassNotFoundException&lt;/h3&gt;
&lt;pre&gt;
 java.lang.Object
     java.lang.Throwable
         java.lang.Exception
             java.lang.ReflectiveOperationException
                 java.lang.ClassNotFoundException
&lt;/pre&gt;
&lt;p&gt;同上,先看它的大佬,老大及其自身的含义&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;Exception:所谓的Exception及其子类，代表的是期望恢复的异常。&lt;/li&gt;
  &lt;li&gt;ReflectiveOperationException：反射操作时引起的异常&lt;/li&gt;
  &lt;li&gt;ClassNotFoundException:调用Class.forname(),ClassLoader.findSystemClass(),ClassLoader.loadClass()方法时，加载指定的字符串类名，未找到类时抛出此类异常。&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;从继承关系可知，ClassNotFoundException是一个执行反射操作时引起且期望恢复的异常。&lt;/p&gt;

&lt;blockquote&gt;

  &lt;p&gt;&lt;small&gt;本文总阅读量&lt;span id=&quot;busuanzi_value_page_pv&quot;&gt;&lt;/span&gt;次&lt;/small&gt;&lt;/p&gt;
&lt;/blockquote&gt;
</description>
        <pubDate>Sat, 19 May 2018 11:06:17 +0800</pubDate>
        <link>http://localhost:4000/2018/05/19/java-excpetion-no-class-def-found-error.html</link>
        <guid isPermaLink="true">http://localhost:4000/2018/05/19/java-excpetion-no-class-def-found-error.html</guid>
        
        
        <category>java</category>
        
      </item>
    
      <item>
        <title>记一次OOM：unable to create new native thread</title>
        <description>&lt;hr /&gt;

&lt;h3 id=&quot;virtualmachineerror&quot;&gt;VirtualMachineError&lt;/h3&gt;
&lt;p&gt;在进入到本文主题之前，我们先了解下Java虚拟机的的error类:VirtualMachineError。&lt;/p&gt;

&lt;p&gt;VirtualMachineError是在Java虚拟机损坏或所需资源耗尽时抛出。而抛出的error具体类包括如下四种&lt;/p&gt;
&lt;blockquote&gt;

  &lt;ul&gt;
    &lt;li&gt;InternalError:底层主机系统软件有故障或硬件错误&lt;/li&gt;
    &lt;li&gt;OutOfMemoryError:Java虚拟机耗尽虚拟或物理内存且GC不能回收足够的空间时的错误&lt;/li&gt;
    &lt;li&gt;StackOverflowError:Java虚拟机耗尽了线程的堆栈空间，通常是由于程序执行无数次递归调用所至。&lt;/li&gt;
    &lt;li&gt;UnknowError:发生异常或错误，但Java虚拟机无法得知实际的异常或错误。&lt;/li&gt;
  &lt;/ul&gt;
&lt;/blockquote&gt;

&lt;p&gt;如上四种皆是VirtualMachineError的子类&lt;/p&gt;

&lt;h3 id=&quot;outofmemoryerror&quot;&gt;OutOfMemoryError&lt;/h3&gt;
&lt;p&gt;本文主要说的是OOM(OutOfMemoryError)。首先让我们看看产生OOM(OutOfMemoryError)的几种情况。&lt;/p&gt;
&lt;blockquote&gt;

  &lt;ol&gt;
    &lt;li&gt;java.lang.OutOfMemoryError:Java heap space&lt;/li&gt;
    &lt;li&gt;java.lang.OutOfMemoryError:Perm space&lt;/li&gt;
    &lt;li&gt;java.lang.OutOfMemoryError:unable to create new native thread&lt;/li&gt;
    &lt;li&gt;java.lang.OutOfMemoryError:Gc overhead limit exceeded&lt;/li&gt;
  &lt;/ol&gt;
&lt;/blockquote&gt;

&lt;p&gt;第一种情况是由于程序申请更多堆空间,而堆空间不足导致&lt;/p&gt;

&lt;p&gt;第二种情况是由于程序申请永久带空间，空间不足导致&lt;/p&gt;

&lt;p&gt;第三种情况是由于创建线程数达到是所限的数量，无法创建新线程所至&lt;/p&gt;

&lt;p&gt;第四种情况是由于是在并行或者并发回收器在GC回收时间过长、超过98%的时间用来做GC并且回收了不到2%的堆内存，然后抛出这种异常进行提前预警，用来避免内存过小造成应用不能正常工作。&lt;/p&gt;

&lt;p&gt;扯了这么多，都是做为本文的引子，今天主要谈的是第三种情况&lt;/p&gt;
&lt;blockquote&gt;
  &lt;p&gt;java.lang.OutOfMemoryError:unable to create new native thread&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h3 id=&quot;排差问题&quot;&gt;排差问题&lt;/h3&gt;
&lt;p&gt;写本文的原因也是由于本人线上遇到此问题后决定做一个笔录。如前面所述，本错误是由于达到了最大线程数，无法创建新线程导致。那为什么不能生成新的线程呢?&lt;/p&gt;
&lt;blockquote&gt;
  &lt;p&gt;具体原因如下两点&lt;/p&gt;
  &lt;ul&gt;
    &lt;li&gt;1、操作系统不能提供足够物理内存&lt;/li&gt;
    &lt;li&gt;2、线程(linux下是轻量的进程数)已到操作系统设置的上限&lt;/li&gt;
  &lt;/ul&gt;
&lt;/blockquote&gt;

&lt;h4 id=&quot;第一种情况&quot;&gt;第一种情况：&lt;/h4&gt;
&lt;p&gt;当我在日志文件中看到此OOM后，使用free -h查看了下系统内存情况.&lt;/p&gt;
&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;[xxx@face-tomcat01 ~]# free -h
             total       used       free     shared    buffers     cached
Mem:          3.7G       3.6G       177M       184K       286M       1.4G
-/+ buffers/cache:       1.9G       1.8G
Swap:           0B         0B         0B
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;从上面输出可以得出，生产机器4G内存，使用了3个多G，剩余177M，操作系统cache使用1.4G。	操作系统cache使用的1.4G是用来缓存IO数据，进程内存不足时，可以释放出来优先分配给进程使用。
一个线程默认为1M，也就是说还可以new出177个新线程。所以第一个错误原因可以排除掉。&lt;/p&gt;

&lt;h4 id=&quot;第二种情况&quot;&gt;第二种情况：&lt;/h4&gt;
&lt;p&gt;那让我们看看是不是第二种情况导致的问题.首先使用&lt;code class=&quot;highlighter-rouge&quot;&gt;ulimit -a&lt;/code&gt;查看系统对用户使用资源的限制：&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;max user processes              (-u) 1024&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;如此说明允许用户最大使用&lt;code class=&quot;highlighter-rouge&quot;&gt;1024&lt;/code&gt;个进程。接下来我们看看jvm线程数的情况,
使用&lt;code class=&quot;highlighter-rouge&quot;&gt;jstack pid &amp;gt; xxx.log&lt;/code&gt; 导出运行时线程数据。再用&lt;code class=&quot;highlighter-rouge&quot;&gt;grep &quot;Thread &quot; xxx.log | wc -l&lt;/code&gt; 统计线程数量为1014。线程数量一直在1024以下波动。&lt;/p&gt;

&lt;p&gt;产生OOM的原因已经找到，具体代码上是哪里引起的，此处略，请在各自的xxx.log中找寻原因。
&lt;br /&gt;
&lt;br /&gt;
&lt;br /&gt;
&lt;br /&gt;&lt;/p&gt;

&lt;blockquote&gt;

  &lt;p&gt;&lt;small&gt;本文总阅读量&lt;span id=&quot;busuanzi_value_page_pv&quot;&gt;&lt;/span&gt;次&lt;/small&gt;&lt;/p&gt;
&lt;/blockquote&gt;
</description>
        <pubDate>Thu, 10 May 2018 00:24:17 +0800</pubDate>
        <link>http://localhost:4000/2018/05/10/java-excpetion-unable-create-newnativethread.html</link>
        <guid isPermaLink="true">http://localhost:4000/2018/05/10/java-excpetion-unable-create-newnativethread.html</guid>
        
        
        <category>java</category>
        
      </item>
    
      <item>
        <title>interface是否继承自Object对象</title>
        <description>&lt;hr /&gt;

&lt;h3 id=&quot;interface是否继承自object对象&quot;&gt;interface是否继承自Object对象?&lt;/h3&gt;
&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;答案:NO，接口和类没有公共的根元素
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h3 id=&quot;为什么interface可以调用object中的方法&quot;&gt;为什么interface可以调用object中的方法？&lt;/h3&gt;
&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;答案:接口中隐式的实现了object中的方法.
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The members of an interface are:&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;Those members declared in the interface.&lt;/li&gt;
  &lt;li&gt;Those members inherited from direct superinterfaces.&lt;/li&gt;
  &lt;li&gt;If an interface has no direct superinterfaces, then the interface implicitly declares a public abstract member method m with signature s, return type r, and throws clause t corresponding to each public instance method m with signature s, return type r, and throws clause t declared in Object, unless a method with the same signature, same return type, and a compatible throws clause is explicitly declared by the interface.&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;从字节码上看是存在歧义&quot;&gt;从字节码上看是存在歧义&lt;/h3&gt;

&lt;p&gt;举例说明，写一个空类，空接口，如下&lt;/p&gt;

&lt;p&gt;空类&lt;/p&gt;

&lt;div class=&quot;language-java highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;
&lt;span class=&quot;kd&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;TestC&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;

&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;

&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;字节码如下&lt;/p&gt;

&lt;div align=&quot;center&quot;&gt;
&lt;img src=&quot;/images/java/base/interfaceAndClass/TestC.jpg&quot; title=&quot;空类字节码分析&quot; /&gt;
&lt;/div&gt;
&lt;p&gt;&lt;br /&gt;&lt;/p&gt;

&lt;p&gt;空接口&lt;/p&gt;

&lt;div class=&quot;language-java highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;
&lt;span class=&quot;kd&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;interface&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;TestI&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;

&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;

&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;字节码如下&lt;/p&gt;

&lt;div align=&quot;center&quot;&gt;
&lt;img src=&quot;/images/java/base/interfaceAndClass/TestI.jpg&quot; title=&quot;空接口字节码分析&quot; /&gt;
&lt;/div&gt;
&lt;p&gt;&lt;br /&gt;&lt;/p&gt;

&lt;p&gt;其中对于super_class的解析如下&lt;/p&gt;

&lt;p&gt;&lt;b&gt;For a class&lt;/b&gt;, the value of the super_class item either must be zero or
must be a valid index into the constant_pool table. If the value of the
super_class item is nonzero, the constant_pool entry at that index must
be a CONSTANT_Class_info structure representing the direct superclass of the
class defined by this class file. Neither the direct superclass nor any of its
superclasses may have the ACC_FINAL flag set in the access_flags item of its
ClassFile structure.
If the value of the super_class item is zero, then this class file must represent
the class Object, the only class or interface without a direct superclass.&lt;/p&gt;

&lt;p&gt;&lt;b&gt;For an interface&lt;/b&gt;, the value of the super_class item must always be a valid
index into the constant_pool table. The constant_pool entry at that index
must be a CONSTANT_Class_info structure representing the class Object.&lt;/p&gt;

&lt;p&gt;也就是说super_class并不能说明interface继承自Object&lt;/p&gt;

&lt;blockquote&gt;

  &lt;p&gt;&lt;small&gt;本文总阅读量&lt;span id=&quot;busuanzi_value_page_pv&quot;&gt;&lt;/span&gt;次&lt;/small&gt;&lt;/p&gt;
&lt;/blockquote&gt;

</description>
        <pubDate>Sat, 28 Apr 2018 17:00:17 +0800</pubDate>
        <link>http://localhost:4000/2018/04/28/java-base-interface-extend-object.html</link>
        <guid isPermaLink="true">http://localhost:4000/2018/04/28/java-base-interface-extend-object.html</guid>
        
        
        <category>Java</category>
        
      </item>
    
      <item>
        <title>组织结构的三种类型</title>
        <description>&lt;hr /&gt;

&lt;h2 id=&quot;职能型&quot;&gt;职能型&lt;/h2&gt;
&lt;p&gt;职能型组织结构是目前最普遍的组织形式。它是金字塔型组织形式。&lt;/p&gt;

&lt;div align=&quot;center&quot;&gt;
	&lt;img src=&quot;/images/company/architecture/project/zhineng.jpg&quot; title=&quot;职能型组织结构&quot; /&gt;
   &lt;/div&gt;
&lt;p&gt;&lt;br /&gt;&lt;/p&gt;

&lt;p&gt;职能型组织结构是一种常规的线型组织结构。采用这种组织结构时，项目是以部门为主体来承担项目的,一个项目由一个或者多个部门承担，一个部门也可能承担多个项目,此种类型结构善长单部门完成一个项目&lt;/p&gt;

&lt;h3 id=&quot;优点&quot;&gt;优点：&lt;/h3&gt;

&lt;ul&gt;
  &lt;li&gt;以职能部门作为承担项目任务的主体，可以充分发挥职能部门的资源集中优势，有利于保障项目需要资源的供给和项目可交付成果的质量，在人员的使用上具有较大的灵活性&lt;/li&gt;
  &lt;li&gt;职能部门内部的技术专家可以被该部门承担的不同项目共享，节约人力，减少了资源浪费&lt;/li&gt;
  &lt;li&gt;同一职能部门内部的专业人员便于交流、相互支援，对创造性地解决技术问题很有帮助。同部门的专业人员易于交流知识和经验，项目成员在事业上具有连续性和保障性&lt;/li&gt;
  &lt;li&gt;项目成员可以将完成项目和完成本部门的职能工作融为一体&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;缺点&quot;&gt;缺点：&lt;/h3&gt;

&lt;ul&gt;
  &lt;li&gt;客户利益和职能部门的利益经常发生冲突，职能部门会为本部门的利益而忽视客户的需求，只集中于本职能部门的活动，项目及客户的利益往往得不到优先考虑&lt;/li&gt;
  &lt;li&gt;当项目需要多个职能部门共同完成，或者一个职能部门内部有多个项目需要完成时，资源的平衡就会出现问题&lt;/li&gt;
  &lt;li&gt;当项目需要由多个部门共同完成时，权力分割不利于各职能部门之间的沟通交流、团结协作。&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;项目型&quot;&gt;项目型&lt;/h2&gt;

&lt;p&gt;项目型组织结构中的部门完全是按照项目进行设置，是一种单目标的垂直组织方式。&lt;/p&gt;

&lt;div align=&quot;center&quot;&gt;
	&lt;img src=&quot;/images/company/architecture/project/xiangmu.jpg&quot; title=&quot;项目型组织结构&quot; /&gt;
   &lt;/div&gt;
&lt;p&gt;&lt;br /&gt;&lt;/p&gt;

&lt;p&gt;在项目型组织结构中，项目经理有足够的权力控制项目的资源。项目成员向唯一领导汇报。这种组织结构适用于开拓性等风险比较大的项目或进度、成本、质量等指标有严格要求的项目，不适合人才匮乏或规模小的企业。&lt;/p&gt;

&lt;h3 id=&quot;优点-1&quot;&gt;优点：&lt;/h3&gt;

&lt;ul&gt;
  &lt;li&gt;项目经理对项目可以全权负责，可以根据项目需要随意调动项目的内部资源或者外部资源&lt;/li&gt;
  &lt;li&gt;项目型组织的目标单一，完全以项目为中心安排工作，决策的速度得以加快，能够对客户的要求作出及时响应，项目组团队精神得以充分发挥，有利于项目的顺利完成&lt;/li&gt;
  &lt;li&gt;项目经理对项目成员有全部权利，项目成员只对项目经理负责，避免了职能型项目组织下项目成员处于多重领导、无所适从的局面，项目经理是项目真正、唯一的领导者&lt;/li&gt;
  &lt;li&gt;组织结构简单，易于操作。项目成员直接属于同一部门，彼此之间的沟通交流简洁、快速，提高了沟通效率，同时加快了决策速度&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;缺点-1&quot;&gt;缺点：&lt;/h3&gt;

&lt;ul&gt;
  &lt;li&gt;对于每一个项目型组织，资源不能共享，即使某个项目的专用资源闲置，也无法应用于另外一个同时进行的类似项目，人员、设施、设备重复配置会造成一定程度的资源浪费&lt;/li&gt;
  &lt;li&gt;公司里各个独立的项目型组织处于相对封闭的环境之中，公司的宏观政策、方针很难做到完全、真正的贯彻实施，可能会影响公司的长远发展&lt;/li&gt;
  &lt;li&gt;在项目完成以后，项目型组织中的项目成员或者被派到另一个项目中去，或者被解雇，对于项目成员来说，缺乏一种事业上的连续性和安全感&lt;/li&gt;
  &lt;li&gt;项目之间处于一种条块分隔状态，项目之间缺乏信息交流，不同的项目组很难共享知识和经验，项目成员的工作会出现忙闲不均的现象&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;矩阵型&quot;&gt;矩阵型&lt;/h2&gt;

&lt;p&gt;矩阵型组织结构是职能型组织结构和项目型组织结构的混合体，既具有职能型组织的特征，又具有项目型组织结构的特征，如图&lt;/p&gt;

&lt;div align=&quot;center&quot;&gt;
	&lt;img src=&quot;/images/company/architecture/project/juzheng.jpg&quot; title=&quot;矩阵型组织结构&quot; /&gt;
   &lt;/div&gt;
&lt;p&gt;&lt;br /&gt;&lt;/p&gt;

&lt;p&gt;它是根据项目的需要，从不同的部门中选择合适的项目人员组成一个临时项目组，项目结束之后，这个项目组也就解散了，然后各个成员回到各自原来的部门，团队的成员需要向不同的经理汇报工作。这种组织结构的关键是项目经理需要具备好的谈判和沟通技能。加强横向联结，充分整合资源，实现信息共享，提高反应速度等方面的优势恰恰符合当前的形势要求。这种组织结构适用于管理规范、分工明确的公司或者跨职能部门的项目。&lt;/p&gt;

&lt;h3 id=&quot;优点-2&quot;&gt;优点：&lt;/h3&gt;

&lt;ul&gt;
  &lt;li&gt;专职的项目经理负责整个项目，以项目为中心，能迅速解决问题。在最短的时间内调配人才，组成一个团队，把不同职能的人才集中在一起&lt;/li&gt;
  &lt;li&gt;多个项目可以共享各个职能部门的资源。在矩阵管理中，人力资源得到了更有效的利用，减少了人员冗余&lt;/li&gt;
  &lt;li&gt;既有利于项目目标的实现，也有利于公司目标方针的贯彻&lt;/li&gt;
  &lt;li&gt;项目成员的顾虑减少了，不用担心被解散，而且他们能有更多机会接触自己企业的不同部门&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;缺点-2&quot;&gt;缺点：&lt;/h3&gt;

&lt;ul&gt;
  &lt;li&gt;资源共享可能引起项目之间的冲突&lt;/li&gt;
&lt;/ul&gt;

&lt;blockquote&gt;

  &lt;p&gt;&lt;small&gt;本文总阅读量&lt;span id=&quot;busuanzi_value_page_pv&quot;&gt;&lt;/span&gt;次&lt;/small&gt;&lt;/p&gt;
&lt;/blockquote&gt;

</description>
        <pubDate>Wed, 18 Apr 2018 14:00:17 +0800</pubDate>
        <link>http://localhost:4000/2018/04/18/company-architecture-project.html</link>
        <guid isPermaLink="true">http://localhost:4000/2018/04/18/company-architecture-project.html</guid>
        
        
        <category>公司</category>
        
      </item>
    
      <item>
        <title>一篇文章读懂互联网公司组织架构</title>
        <description>&lt;hr /&gt;

&lt;div align=&quot;center&quot;&gt;
&lt;img src=&quot;/images/company/base/architecture/0.jpg&quot; title=&quot;聊一聊架构&quot; /&gt;
&lt;/div&gt;
&lt;p&gt;&lt;br /&gt;&lt;/p&gt;

&lt;p&gt;每个公司不同的成长历史、不同的业务架构和不同的管理风格，造就了它们不同的公司架构，今天就让我们来分析一下目前比较常见的互联网公司架构模式及各岗位主要职能要求。&lt;/p&gt;

&lt;p&gt;&lt;br /&gt;&lt;/p&gt;
&lt;div align=&quot;center&quot;&gt;
&lt;img src=&quot;/images/company/base/architecture/1.png&quot; title=&quot;科技公司组织结构图&quot; /&gt;
&lt;/div&gt;
&lt;p&gt;&lt;br /&gt;
通常情况下，各公司会根据自己的情况，采用不同的组织架构。&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;扁平式的组织架构，就是各职能单位各自独立，彼此之间通过管理人员与部门员工的频繁沟通、呼应，来解决各种问题；&lt;/li&gt;
  &lt;li&gt;项目组式的组织架构，以项目为中心，将项目所需的人员集中在一个Team中；&lt;/li&gt;
  &lt;li&gt;混合式的组织架构，一部分采用项目组式管理，而另一部分则采用扁平化管理。&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;b&gt;但无论组织架构如何调整，事儿还是那些事儿，都得有人来做。&lt;/b&gt;&lt;/p&gt;

&lt;p&gt;公司创业初期，人员规模可能比较小，时常出现一人身兼数职的情况。但是人少并不意味着就可以“将就”，发展初期制定一个比较合理的公司组织架构，部分暂时无人或兼任的职位可以暂时空出，以备后续按岗位来招人填充。一个好的公司架构，对创业公司的后续发展受益良多。&lt;/p&gt;

&lt;p&gt;随着人员规模的扩大，公司要想继续持续发展，必然还会产生改变组织结构的需求。&lt;/p&gt;

&lt;p&gt;&lt;b&gt;&lt;i&gt;组织结构是为公司发展服务的&lt;i&gt;，各个时期产生的组织结构都是为了适应公司发展的需要。&lt;b&gt;&lt;/b&gt;&lt;/i&gt;&lt;/i&gt;&lt;/b&gt;&lt;/p&gt;

&lt;p&gt;让我们先来看看通常一家互联网公司会有哪些职位：&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;管理职位：CEO、COO、CFO、CTO、CIO等&lt;/li&gt;
  &lt;li&gt;产品条线：产品经理、产品助理、设计师等&lt;/li&gt;
  &lt;li&gt;运营条线：产品运营、活动策划、会员运营、数据运营、（新）媒体运营、内容策划、编辑等&lt;/li&gt;
  &lt;li&gt;技术条线：架构师、前端工程师、开发工程师、测试工程师、运维工程师等&lt;/li&gt;
  &lt;li&gt;市场条线：渠道、推广、商务合作等&lt;/li&gt;
  &lt;li&gt;行政条线：HR、行政等&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;对于大公司来说，专人专岗，需要更多的“专业型人才”，而对于小公司来说，可能需要更多的是“复合型人才”，以下是我们一个创业公司的人员架构：&lt;/p&gt;

&lt;h2 id=&quot;产品部门&quot;&gt;产品部门&lt;/h2&gt;

&lt;h3 id=&quot;产品经理&quot;&gt;产品经理&lt;/h3&gt;

&lt;p&gt;不是随便一个什么人就可以去做「产品经理」，他需要对用户理解，对生活了解，是需要阅历和沉淀的职位。&lt;/p&gt;

&lt;p&gt;&lt;br /&gt;&lt;/p&gt;
&lt;div align=&quot;center&quot;&gt;
&lt;img src=&quot;/images/company/base/architecture/2.jpg&quot; /&gt;
&lt;/div&gt;
&lt;p&gt;&lt;br /&gt;&lt;/p&gt;

&lt;p&gt;而产品经理这个角色，在大公司和小公司的职责是完全不同的。&lt;/p&gt;

&lt;p&gt;在大公司，会多出很多事务性的工作，产品文档、数据流程等这些事务性的工作就会交由「产品助理」来完成。&lt;/p&gt;

&lt;p&gt;在小公司很可能并不独立的存在「产品经理」职位，而往往是由设计、开发等职位兼顾的。&lt;/p&gt;

&lt;p&gt;「产品经理」的具体职能是落在对用户需求的深刻理解上的，并且通过逻辑思维和体验优化来让客户的需求得到满足。&lt;/p&gt;

&lt;p&gt;在这个前提下，「产品经理」的职位就会要求：&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;同理心，对用户理解&lt;/li&gt;
  &lt;li&gt;专注度，对产品要深得下去&lt;/li&gt;
  &lt;li&gt;感受力，对产品的体验有追求，但更能敏感的发掘到需要增强补足的可能性&lt;/li&gt;
  &lt;li&gt;沟通与抗压能力&lt;/li&gt;
  &lt;li&gt;逻辑思维能力&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;产品助理&quot;&gt;产品助理&lt;/h3&gt;

&lt;p&gt;通常「产品助理」是一个在大公司里才会出现的岗位。&lt;/p&gt;

&lt;p&gt;这个职位设立的初衷，是解放产品经理，让产品经理从繁杂的会议、扯皮、文档写作中解放出来，专心做需求分析和产品设计。&lt;/p&gt;

&lt;p&gt;如果你希望成为一个「产品助理」，你可能需要具备：&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;较好的沟通能力&lt;/li&gt;
  &lt;li&gt;较强的抗压能力&lt;/li&gt;
  &lt;li&gt;灵活的头脑和快速反应能力&lt;/li&gt;
  &lt;li&gt;勤快&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;如果你是应届毕业生，希望做产品工作，那么可以考虑一下从大公司的「产品助理」做起。&lt;/p&gt;

&lt;p&gt;当然，如果你天赋异禀，我觉得直接做「产品经理」也挺好。&lt;/p&gt;

&lt;p&gt;只是这种天赋异禀的人，毕竟少。&lt;/p&gt;

&lt;h3 id=&quot;设计师&quot;&gt;设计师&lt;/h3&gt;

&lt;p&gt;早些年间，是没有「设计师」这么高档的头衔的，就叫做「美工」。&lt;/p&gt;

&lt;p&gt;后来，随着互联网的发达，对职位的职能有了非常细致的重新分配。&lt;/p&gt;

&lt;p&gt;于是，有了各种「设计师」，UI、UE、交互、动画……甚至还有专门设计icon和Logo的。&lt;/p&gt;

&lt;p&gt;所以，对于「设计师」这样的职位，大家在投递之前，需要看清楚具体的业务职责。&lt;/p&gt;

&lt;p&gt;对于设计师来说，有几个能力很重要：&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;审美，不知道什么是好看的，不是作死么&lt;/li&gt;
  &lt;li&gt;至少掌握一种介质的设计效果，平面设计和网页设计就真的是不一样，PC端的设计和移动应用的设计也就是不一样。都能掌握的，不多。&lt;/li&gt;
  &lt;li&gt;时间观念。&lt;/li&gt;
  &lt;li&gt;对精品的追求。&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;运营部门&quot;&gt;运营部门&lt;/h2&gt;

&lt;p&gt;运营是块砖，哪里需要哪里搬。&lt;/p&gt;

&lt;h3 id=&quot;产品运营&quot;&gt;产品运营&lt;/h3&gt;

&lt;p&gt;这个工作主要是围绕产品开展运营工作。&lt;/p&gt;

&lt;p&gt;简单概括主要工作内容：拉新、留存、促活（变现）。&lt;/p&gt;

&lt;p&gt;&lt;br /&gt;&lt;/p&gt;
&lt;div align=&quot;center&quot;&gt;
&lt;img src=&quot;/images/company/base/architecture/3.png&quot; title=&quot;产品、渠道和用户的关系图&quot; /&gt;
&lt;/div&gt;
&lt;p&gt;&lt;br /&gt;&lt;/p&gt;

&lt;h3 id=&quot;活动策划&quot;&gt;活动策划&lt;/h3&gt;

&lt;p&gt;这个主要就是做活动，属于专门的岗位。&lt;/p&gt;

&lt;h3 id=&quot;会员运营&quot;&gt;会员运营&lt;/h3&gt;

&lt;p&gt;这个职位在涉及用户消费忠诚度的行业方面出现比较多，主要是维系会员用户，通过会员权益建设和客户关怀设计留住用户并促使其长期的活跃与消费。&lt;/p&gt;

&lt;h3 id=&quot;数据运营&quot;&gt;数据运营&lt;/h3&gt;

&lt;p&gt;这个职位比较新，收集市场、用户等方面的数据，对公司产品的运营数据进行分析，发现问题，提出针对性方案。&lt;/p&gt;

&lt;h3 id=&quot;新媒体运营&quot;&gt;(新)媒体运营&lt;/h3&gt;

&lt;p&gt;多见于通过在各种媒体平台上的内容建设去引流或者维系用户。&lt;/p&gt;

&lt;h2 id=&quot;内容策划编辑&quot;&gt;内容策划、编辑&lt;/h2&gt;
&lt;p&gt;这两个职位的差异不大，都是创造、审核内容，将优质的内容呈现给用户，并达到对应的运营目标。&lt;/p&gt;

&lt;p&gt;运营岗位通常共性的要求有：&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;头脑灵活，有创意。能够创造出精品内容，或者设计出有意思的活动。&lt;/li&gt;
  &lt;li&gt;对数据非常敏感。能够发现数据波动，并找出数据波动的原因，从运营端进行各种调整与优化。&lt;/li&gt;
  &lt;li&gt;较强的沟通能力。能够通过沟通去推进并解决问题。&lt;/li&gt;
  &lt;li&gt;执行力。说到、做到、做好。&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;技术&quot;&gt;技术&lt;/h2&gt;

&lt;p&gt;技术岗位的要求就比较复杂了。&lt;/p&gt;

&lt;p&gt;&lt;br /&gt;&lt;/p&gt;
&lt;div align=&quot;center&quot;&gt;
&lt;img src=&quot;/images/company/base/architecture/4.jpg&quot; /&gt;
&lt;/div&gt;
&lt;p&gt;&lt;br /&gt;&lt;/p&gt;

&lt;h3 id=&quot;架构师&quot;&gt;架构师&lt;/h3&gt;

&lt;p&gt;公司产品技术方面的总设计师，通常需要多年的开发经验。&lt;/p&gt;

&lt;p&gt;要求能够设计系统架构，并保证满足架构的稳定性、可扩展性、性能优越等多项指标的可用性与优越性。&lt;/p&gt;

&lt;p&gt;一般的毕业生是不可能拿到这个职位的Offer的，多年经验的开发工程师也未必能够拿到这个职位。&lt;/p&gt;

&lt;h3 id=&quot;前端工程师&quot;&gt;前端工程师&lt;/h3&gt;

&lt;p&gt;与设计师和产品联系非常紧密，确保前端的可用性与易用性。&lt;/p&gt;

&lt;h3 id=&quot;开发工程师&quot;&gt;开发工程师&lt;/h3&gt;

&lt;p&gt;实现功能开发，让功能可用、易用，「码农」是最直接的描述，写代码的牛人或者普通人。&lt;/p&gt;

&lt;h3 id=&quot;测试工程师&quot;&gt;测试工程师&lt;/h3&gt;

&lt;p&gt;不管一家公司的规模多大，测试的工作都必须有人来干，在规模中等及以上的公司里，会有专门的测试工程师，他们就是专门从事开发完成后的测试工作，找出Bug，写出报告，负责回归，确保上线前产品没有影响使用的重大Bug，甚至零Bug状态上线，要有各种浏览器、虚拟机，抽屉里有各种各样的终端设备，兼容性测试和功能测试一样重要。&lt;/p&gt;

&lt;h3 id=&quot;运维工程师&quot;&gt;运维工程师&lt;/h3&gt;

&lt;p&gt;确保后台不出问题，确保服务器、网络出现了问题能够及时的修复，等等。服务器、带宽够不够，一个大活动需要备机，都要找他们。&lt;/p&gt;

&lt;p&gt;当然啦，你说公司装电脑，嗯，那是IT的事儿了，多年前叫「网管」。他们可以是运维的一部分，也可以归于行政职能。&lt;/p&gt;

&lt;p&gt;那么，对于技术人员来说，可能通用的要求是这样：&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;懂代码、懂系统、懂业务&lt;/li&gt;
  &lt;li&gt;抗压能力&lt;/li&gt;
  &lt;li&gt;沟通能力&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;如果代码写的够快够好，那么其他的都可以降低标准，甚至忽略。&lt;/p&gt;

&lt;h2 id=&quot;市场&quot;&gt;市场&lt;/h2&gt;

&lt;p&gt;市场这类职能人员，在一些公司会和运营组合并，在另一些公司则会独立。&lt;/p&gt;

&lt;p&gt;但还是那句话，事儿还是那些事儿。&lt;/p&gt;

&lt;p&gt;他们和运营人员的区别在于：&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;市场更多考虑的是品牌、传播、导流，而运营更多考虑的是留存、活跃、付费。&lt;/li&gt;
  &lt;li&gt;指标不同，导向不同，精力分配不同，做事情的对象与深度不同。&lt;/li&gt;
  &lt;li&gt;对于市场人员来说，更重要的是了解市场动态、掌握竞品情况、引入和维系合作方，并通过媒体、公关等方式，确保公司与产品的口碑。当然，在很多大的公司，媒体、公关的活儿是由专门的公关部来处理的，这是另一个话题。&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;在市场职能下，也会有很多细分：&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;渠道，主要是维系各类渠道，确保能够拿到渠道资源。&lt;/li&gt;
  &lt;li&gt;推广，这个词儿比较宽泛，看公司如何定位「推广」的职责与范围，如果是App，那么渠道和推广可能是同一个职能，甚至合并起来的职位；如果是PC端，那么推广可能还需要考量广告投放、ROI等相关事项。&lt;/li&gt;
  &lt;li&gt;商务合作，主要是去找寻外部可以合作的商户和资源，达成合作，可能涉及联合活动之类的业务。&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;市场类职能的共性要求是：&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;沟通能力。&lt;/li&gt;
  &lt;li&gt;客户保留的能力。&lt;/li&gt;
  &lt;li&gt;理解力，必须要充分了解产品。&lt;/li&gt;
  &lt;li&gt;执行力。&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;行政&quot;&gt;行政&lt;/h2&gt;

&lt;h3 id=&quot;行政方向&quot;&gt;行政方向&lt;/h3&gt;

&lt;p&gt;「行政」作为和「人事」、「财务」并驾齐驱的公司三大支持部门，对公司的业务发展起着重大的作用。&lt;/p&gt;

&lt;p&gt;企业的日常经营过程当中，会产生许多事务性工作，比如：办理各种证件执照、租赁办公场所、装修装饰、软硬件维护、出入管理、物品采购等，这些事务让研发、生产和销售人员兼职来做不仅机会成本较高，还会造成重复工作，效率低下。
为了解决这个问题，把这一类「杂七杂八」工作专门分工给一些人进行处理，这就是行政部的由来。&lt;/p&gt;

&lt;p&gt;行政部门的具体工作可分为四大类：1、基础环境保障。2、业务流程保障。3、行为制度建设。4、综合事务管理。&lt;/p&gt;

&lt;p&gt;&lt;br /&gt;&lt;/p&gt;
&lt;div align=&quot;center&quot;&gt;
&lt;img src=&quot;/images/company/base/architecture/5.png&quot; /&gt;
&lt;/div&gt;
&lt;p&gt;&lt;br /&gt;&lt;/p&gt;

&lt;h3 id=&quot;人事方向&quot;&gt;人事方向&lt;/h3&gt;

&lt;p&gt;华为在做一个重大决策的时候，往往会征询两个部门的意见，第一是财务部，第二就是人力资源部门。如果两个部门其中一个部门持否定意见，决策就会被否决。&lt;/p&gt;

&lt;p&gt;人力资源管理在不同行业有不同的特点，一般来讲可以分为六个大方面：&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;人力资源规划&lt;/li&gt;
  &lt;li&gt;招聘与配置&lt;/li&gt;
  &lt;li&gt;培训&lt;/li&gt;
  &lt;li&gt;绩效管理&lt;/li&gt;
  &lt;li&gt;薪酬福利管理&lt;/li&gt;
  &lt;li&gt;劳动关系&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;我们国家现在大多数的企业人力资源往往处于比较初级，没有像国际上一样，上升到组织战略层次，发挥好应有的作用。&lt;/p&gt;

&lt;p&gt;在一般企业，简而言之就四个字， 招、用、育、留。&lt;/p&gt;

&lt;p&gt;招是招聘，要求用预算内的资源，找到胜任工作要求的人员。
用是使用，关键在于要在发挥员工最大价值和维持员工满意度、忠诚度中间找到平衡点。
育是培育，目标是双赢：一方面提高工作价值量；一方面有助于员工职业生涯发展。
留是报酬，任务是以工作绩效为主要依据，计算管理员工的薪酬福利。以此来激励员工忠诚的 为企业服务。&lt;/p&gt;

&lt;p&gt;理一下逻辑：一家创业型公司有了自己的「人力资源规划」，然后开始「招聘」，招进来的人要「培训」，同时要发「薪酬」，要处理社保，员工档案，岗位调动事宜「员工关系」，要让招进来的人少拿钱多干活「绩效考核」，这就是人力资源工作的意义。&lt;/p&gt;

&lt;h3 id=&quot;财务方面&quot;&gt;财务方面&lt;/h3&gt;

&lt;p&gt;大公司和小公司差异性太强，专业性也太强。才疏学浅就不班门弄斧了。&lt;/p&gt;

&lt;p&gt;听过一个段子：&lt;/p&gt;

&lt;p&gt;财务人就像一只西行的猴子，从决定走上财务西行的路开始，就必须戴上各种财务、税务、法律的紧箍咒。&lt;/p&gt;

&lt;p&gt;一路上行人往往会以为财务人是稳定、轻松、自在的一场向西的旅行，一路上同事八戒对财务这个猴子，规定的这个不行，那个不可以，有太多的抱怨。财务猴子又总是被八戒同事告到师父那去受到无名的指责。&lt;/p&gt;

&lt;p&gt;一路上财务这个猴子需要打理税务部门的通关文牒，其中免不了需要面对各种小鬼和妖怪。一路上财务猴子需要直面工商、税务、法院等各路怪兽。可谓九九八十一难。&lt;/p&gt;

&lt;p&gt;可每当同事八戒在外面闯祸后，业务发生后，老板师父就会给财务说：悟空，你去摆平一下。&lt;/p&gt;

&lt;p&gt;这一切在老板唐僧看来，不就是你财务猴子该干的吗？可是猴哥心里苦啊，为何不能事先给财务报备一下呢？为何我猴哥总是只能给各个部门造成的税务财务问题擦屁股呢？&lt;/p&gt;

&lt;p&gt;在这条西行的财务之路上，财务人如带着紧箍咒的猴子，是一个灭火队长，是一个军师，是一个闷声做事的斗士。这条路的出路在哪？敢问路在何方，路在脚下。&lt;/p&gt;

&lt;p&gt;转载：https://www.jianshu.com/p/671c876e74ef&lt;/p&gt;

&lt;blockquote&gt;

  &lt;p&gt;&lt;small&gt;本文总阅读量&lt;span id=&quot;busuanzi_value_page_pv&quot;&gt;&lt;/span&gt;次&lt;/small&gt;&lt;/p&gt;
&lt;/blockquote&gt;

</description>
        <pubDate>Wed, 18 Apr 2018 14:00:17 +0800</pubDate>
        <link>http://localhost:4000/2018/04/18/company-architecture-base.html</link>
        <guid isPermaLink="true">http://localhost:4000/2018/04/18/company-architecture-base.html</guid>
        
        
        <category>公司</category>
        
      </item>
    
      <item>
        <title>天津之行</title>
        <description>&lt;hr /&gt;

&lt;h2 id=&quot;天津&quot;&gt;天津&lt;/h2&gt;

&lt;p&gt;天津自古因漕运而兴起，明永乐二年十一月二十一日（1404年12月23日）正式筑城，是中国古代唯一有确切建城时间记录的城市。历经600多年，造就了天津中西合璧、古今兼容的独特城市风貌。&lt;/p&gt;

&lt;h2 id=&quot;心生天津之行&quot;&gt;心生天津之行&lt;/h2&gt;

&lt;p&gt;4年前有过一次天津之旅，失败的一次旅行。也是这一次天津给我留下的的印象=脏，乱，经济落后。4年来总有个疑团，具体是什么，自己也是不解。话说现在，某一天晚饭后，闲来无聊，和同事（彭小辉）去人民大学散步，聊起他在天津的点滴。此时我的也疑团也明朗了许多，去一趟天津，一访天津真面目。&lt;/p&gt;

&lt;h2 id=&quot;第一天&quot;&gt;第一天&lt;/h2&gt;

&lt;h3 id=&quot;出发&quot;&gt;出发&lt;/h3&gt;
&lt;blockquote&gt;
  &lt;p&gt;3.31周六，晴，轻度雾霾。早上近9点，同事们陆续到达出发地点优家青年社区（公司）。大伙还是很守时。简单的用过早餐后，一路闲聊(聊车、人，杨小颖打了一路游戏)驶向天津卫。天津这个地方很亲民。简单几句话描述下。刚行驶到武青区高速出口时，我们的司机小朋友（王小勇）正在掏现金时，一个交警同志走过来，很客气的同我们的司机同事打了个招乎”安全带”怎么回事，靠边停车。…………几分钟后…..一张50块大洋的发票做为礼物送给我们。得到交警同志关照后，带着另一种心情驶向了我们的第一站-古文化街&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h3 id=&quot;第一站-古文化街-金鳌&quot;&gt;第一站: 古文化街-金鳌&lt;/h3&gt;

&lt;blockquote&gt;
  &lt;p&gt;停好车，步行至古文化大街，伴随着小商贩的吆喝声越来越大，古文化大街也进入了眼球。大街近临海河，小辉同学做为导游首推海河的玻璃桥上走走。走上玻璃桥果然大不同，一条宽大的河尽收眼底，偶儿有轮船渡过，街上游客竞相摆拍。桥头有几个大湿胸拉客拍照，baby(杨小颖)被其中一位大湿胸调戏,幸好baby同学有定性，没犯错。逗留片刻后转向往古文化大街。几句-“臭豆腐喽..正宗长沙臭豆腐”响在耳边，由于略饿的原因，停下了脚步，四个大汉（注：小辉觉得恶心，没吃）整了两碗长沙臭豆腐–味道不错。端着臭豆腐走马观花至大街尽头（其他三位，顺带去了趟厕所）。一坐高大的牌坊竖立面当，提有两金色大字”鳌金“。&lt;/p&gt;
&lt;/blockquote&gt;

&lt;ul&gt;
  &lt;li&gt;baby问道：”鳌”念啥字&lt;/li&gt;
  &lt;li&gt;我回道:”不认识”&lt;/li&gt;
  &lt;li&gt;小辉:”鳌拜”的”鳌”&lt;/li&gt;
  &lt;li&gt;…念：”鳖(bie)”…不是吧…好像是…”???”&lt;/li&gt;
  &lt;li&gt;经过百度大师证实，小辉是对的.
    &lt;h4 id=&quot;鳌是海中的一种龟是中国神话中的一种神龟龙龟通常是权利和财富的象征&quot;&gt;“鳌”是海中的一种龟：是中国神话中的一种神龟，龙龟。通常是权利和财富的象征。&lt;/h4&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;走了几步，回头一瞧，读反了–“金鳌”	
&lt;img src=&quot;/images/travel/tianjin/haihe1.jpg&quot; alt=&quot;海河&quot; title=&quot;海河&quot; /&gt;&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/images/travel/tianjin/haihe2.jpg&quot; alt=&quot;海河&quot; title=&quot;海河&quot; /&gt;&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/images/travel/tianjin/haihe3.jpg&quot; alt=&quot;海河&quot; title=&quot;海河&quot; /&gt;&lt;/p&gt;

&lt;h3 id=&quot;第二站-意风区&quot;&gt;第二站: 意风区&lt;/h3&gt;

&lt;blockquote&gt;
  &lt;p&gt;走出古文化大街后，步行至意风区。–无言。直接上图（感觉不错）&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;&lt;img src=&quot;/images/travel/tianjin/yifengqu1.jpg&quot; alt=&quot;意风区&quot; title=&quot;意风区&quot; /&gt;&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/images/travel/tianjin/yifengqu2.jpg&quot; alt=&quot;意风区&quot; title=&quot;意风区&quot; /&gt;&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/images/travel/tianjin/yifengqu3.jpg&quot; alt=&quot;意风区&quot; title=&quot;意风区&quot; /&gt;&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/images/travel/tianjin/yifengqu4.jpg&quot; alt=&quot;意风区&quot; title=&quot;意风区&quot; /&gt;&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/images/travel/tianjin/yifengqu5.jpg&quot; alt=&quot;意风区&quot; title=&quot;意风区&quot; /&gt;&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/images/travel/tianjin/yifengqu6.jpg&quot; alt=&quot;意风区&quot; title=&quot;意风区&quot; /&gt;&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/images/travel/tianjin/yifengqu7.jpg&quot; alt=&quot;意风区&quot; title=&quot;意风区&quot; /&gt;&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/images/travel/tianjin/yifengqu8.jpg&quot; alt=&quot;意风区&quot; title=&quot;意风区&quot; /&gt;&lt;/p&gt;

&lt;h3 id=&quot;第三站-五大道&quot;&gt;第三站: 五大道&lt;/h3&gt;

&lt;blockquote&gt;
  &lt;p&gt;离开意风区，摩拜 AND OFO一路骑行至五大道，在天津骑行是一种享受，一路穿行几大省市（河北路，河南路，云南路，长沙道，贵阳道…）。上图无言&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;&lt;img src=&quot;/images/travel/tianjin/wudadao1.jpg&quot; alt=&quot;五大道&quot; title=&quot;五大道&quot; /&gt;&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/images/travel/tianjin/wudadao2.jpg&quot; alt=&quot;五大道&quot; title=&quot;五大道&quot; /&gt;&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/images/travel/tianjin/wudadao3.jpg&quot; alt=&quot;五大道&quot; title=&quot;五大道&quot; /&gt;&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/images/travel/tianjin/wudadao4.jpg&quot; alt=&quot;五大道&quot; title=&quot;五大道&quot; /&gt;&lt;/p&gt;

&lt;h3 id=&quot;第四站-水上公园&quot;&gt;第四站: 水上公园&lt;/h3&gt;

&lt;blockquote&gt;
  &lt;p&gt;水上公园觉得一般。比较大众化，景色还是不错的。有一高台，望景很好。&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h3 id=&quot;第五站滨海区烧烤店&quot;&gt;第五站:滨海区–烧烤店&lt;/h3&gt;

&lt;blockquote&gt;
  &lt;p&gt;一天行程下来，累是必然，然兴致勃勃，啤酒当歌，聊聊小勇几段往事，闲题几篇，已入深夜，锦江入住，小息一晚。&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h2 id=&quot;第二天&quot;&gt;第二天&lt;/h2&gt;

&lt;h3 id=&quot;第一站-东交港&quot;&gt;第一站: 东交港&lt;/h3&gt;

&lt;blockquote&gt;
  &lt;p&gt;约好5点起床，6点驶至东交港看日出。天有不测风云，雾霾太过严重，看到的仅是海上小火球。迎着小海风小跑几步。上图无言&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;&lt;img src=&quot;/images/travel/tianjin/dongjiaogang1.jpg&quot; alt=&quot;东交港&quot; title=&quot;东交港&quot; /&gt;&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/images/travel/tianjin/dongjiaogang2.jpg&quot; alt=&quot;东交港&quot; title=&quot;东交港&quot; /&gt;&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/images/travel/tianjin/dongjiaogang3.jpg&quot; alt=&quot;东交港&quot; title=&quot;东交港&quot; /&gt;&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/images/travel/tianjin/dongjiaogang4.jpg&quot; alt=&quot;东交港&quot; title=&quot;东交港&quot; /&gt;&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/images/travel/tianjin/dongjiaogang5.jpg&quot; alt=&quot;东交港&quot; title=&quot;东交港&quot; /&gt;&lt;/p&gt;

&lt;h3 id=&quot;佛罗伦萨小镇&quot;&gt;佛罗伦萨小镇&lt;/h3&gt;

&lt;blockquote&gt;
  &lt;p&gt;佛罗伦萨小镇，欧美建筑风格的购物区。景色不错。购物 AND 旅游的好去处。上图无言&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;&lt;img src=&quot;/images/travel/tianjin/flls1.jpg&quot; alt=&quot;佛罗伦萨小镇&quot; title=&quot;佛罗伦萨小镇&quot; /&gt;&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/images/travel/tianjin/flls2.jpg&quot; alt=&quot;佛罗伦萨小镇&quot; title=&quot;佛罗伦萨小镇&quot; /&gt;&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/images/travel/tianjin/flls3.jpg&quot; alt=&quot;佛罗伦萨小镇&quot; title=&quot;佛罗伦萨小镇&quot; /&gt;&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/images/travel/tianjin/flls4.jpg&quot; alt=&quot;佛罗伦萨小镇&quot; title=&quot;佛罗伦萨小镇&quot; /&gt;&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/images/travel/tianjin/flls5.jpg&quot; alt=&quot;佛罗伦萨小镇&quot; title=&quot;佛罗伦萨小镇&quot; /&gt;&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/images/travel/tianjin/flls6.jpg&quot; alt=&quot;佛罗伦萨小镇&quot; title=&quot;佛罗伦萨小镇&quot; /&gt;&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/images/travel/tianjin/flls7.jpg&quot; alt=&quot;佛罗伦萨小镇&quot; title=&quot;佛罗伦萨小镇&quot; /&gt;&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/images/travel/tianjin/flls8.jpg&quot; alt=&quot;佛罗伦萨小镇&quot; title=&quot;佛罗伦萨小镇&quot; /&gt;&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/images/travel/tianjin/flls9.jpg&quot; alt=&quot;佛罗伦萨小镇&quot; title=&quot;佛罗伦萨小镇&quot; /&gt;&lt;/p&gt;

&lt;h3 id=&quot;回北京&quot;&gt;回北京&lt;/h3&gt;

&lt;blockquote&gt;
  &lt;p&gt;1小时30分的路程，睡了一路。辛苦了司机大神:王小勇，同司机聊天的:彭小辉,一路玩绝地逢生:Baby&lt;/p&gt;
&lt;/blockquote&gt;

&lt;blockquote&gt;

  &lt;p&gt;&lt;small&gt;本文总阅读量&lt;span id=&quot;busuanzi_value_page_pv&quot;&gt;&lt;/span&gt;次&lt;/small&gt;&lt;/p&gt;
&lt;/blockquote&gt;
</description>
        <pubDate>Mon, 02 Apr 2018 16:12:17 +0800</pubDate>
        <link>http://localhost:4000/2018/04/02/travel-chain-tianjin.html</link>
        <guid isPermaLink="true">http://localhost:4000/2018/04/02/travel-chain-tianjin.html</guid>
        
        
        <category>喜好</category>
        
      </item>
    
      <item>
        <title>LinkedList remove方法陷阱</title>
        <description>&lt;hr /&gt;

&lt;h2 id=&quot;linkedlist定义&quot;&gt;LinkedList定义&lt;/h2&gt;

&lt;p&gt;LinkedList是实现list和Deque接口的双向链表且非线程安全。LinkedList应该在什么场景下使用LinkedList呢?&lt;/p&gt;

&lt;p&gt;熟悉双向链表的同学,首先想到的应该是随机增删等操作。没错，随机增删是双向链表所擅长的操作，但LinkedList果真如些吗？&lt;/p&gt;

&lt;h2 id=&quot;remove方法时间复杂度o1&quot;&gt;remove方法时间复杂度O(1)?&lt;/h2&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-java&quot; data-lang=&quot;java&quot;&gt;&lt;table class=&quot;rouge-table&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;    &lt;span class=&quot;kd&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;boolean&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;remove&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Object&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;o&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;o&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;kc&quot;&gt;null&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Node&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;E&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;x&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;first&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;x&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;!=&lt;/span&gt; &lt;span class=&quot;kc&quot;&gt;null&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;x&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;next&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
                &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;item&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;kc&quot;&gt;null&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
                    &lt;span class=&quot;n&quot;&gt;unlink&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
                    &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;kc&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
                &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
            &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
        &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Node&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;E&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;x&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;first&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;x&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;!=&lt;/span&gt; &lt;span class=&quot;kc&quot;&gt;null&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;x&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;next&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
                &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;o&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;equals&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;item&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;))&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
                    &lt;span class=&quot;n&quot;&gt;unlink&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
                    &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;kc&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
                &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
            &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
        &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;kc&quot;&gt;false&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;p&gt;从代码上我们可以对O(1)说NO，显然，LinkedList.remove(Object)方法的时间复杂度是O(n)+O(1)。最坏情况下要删除的元素是最后一个，你都要比较N-1次才能找到要删除的元素。&lt;/p&gt;

&lt;h2 id=&quot;存在同样遍历的问题的方法&quot;&gt;存在同样遍历的问题的方法&lt;/h2&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-java&quot; data-lang=&quot;java&quot;&gt;&lt;table class=&quot;rouge-table&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1
2
3
&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;  &lt;span class=&quot;kd&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;indexOf&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Object&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;o&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;  
  &lt;span class=&quot;kd&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;add&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;index&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;E&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;element&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;
  &lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;blockquote&gt;

  &lt;p&gt;&lt;small&gt;本文总阅读量&lt;span id=&quot;busuanzi_value_page_pv&quot;&gt;&lt;/span&gt;次&lt;/small&gt;&lt;/p&gt;
&lt;/blockquote&gt;
</description>
        <pubDate>Mon, 02 Apr 2018 16:12:17 +0800</pubDate>
        <link>http://localhost:4000/2018/04/02/java-base-linkedlist-remove.html</link>
        <guid isPermaLink="true">http://localhost:4000/2018/04/02/java-base-linkedlist-remove.html</guid>
        
        
        <category>Java</category>
        
      </item>
    
      <item>
        <title>一次排查MYSQL索引失效的过程</title>
        <description>&lt;hr /&gt;

&lt;h1 id=&quot;背景&quot;&gt;背景&lt;/h1&gt;

&lt;p&gt;由于一次系统升级，造成生产系统中订单商品金额记录错误。账务在计算销售成本时出现差额。订单商品表记录270W，则需要修复3K条记录。&lt;/p&gt;

&lt;h1 id=&quot;修复过程中的问题&quot;&gt;修复过程中的问题&lt;/h1&gt;

&lt;p&gt;在生产环境修复一条记录花费时间大概7秒.这个速度远远超出我们的想象，慢的出奇。&lt;/p&gt;

&lt;h1 id=&quot;排查&quot;&gt;排查&lt;/h1&gt;

&lt;p&gt;发现订单商品金额记录错误后，按排江勇（同事）处理此问题。同事很快的定位到问题，且给出了使用存储过程做为解决方案。但执行存储过程中发现速度出奇的慢，修复一条记录的时间大概7秒钟。如此这般，仅3K，则需要花费5个小时的时间。这是不可接受的。&lt;/p&gt;

&lt;p&gt;但又百思不解，在where中的字段都有索引，为什么还会如此的慢。经过多轮尝试发现一个奇怪的现象，修复一条数据时做了大量的表扫码(Handler_read_rnd_next的数值210W)。这也说明在where中的条件未使用到索引。
小试了一把，将where条件中的变量@order_code由固定字符串替换后，Handler_read_rnd_next的数值为3.修复记录仅用了几十毫秒。这就断定问题是由变量@order_code引起的.初次断定是由于@order_code的编码问题导致。江勇通过select character(@order_code)得到的结果是:utf8mb4,而表中的字段编码是utf8.原来如此.&lt;/p&gt;

&lt;h1 id=&quot;解决方案&quot;&gt;解决方案&lt;/h1&gt;

&lt;p&gt;把@order_code转为utf8编码&lt;/p&gt;

&lt;p&gt;SELECT CONVERT(@order_code, CHAR CHARACTER SET utf8) INTO temp;&lt;/p&gt;

&lt;p&gt;搞定&lt;/p&gt;

&lt;h1 id=&quot;小结&quot;&gt;小结&lt;/h1&gt;

&lt;p&gt;SQL无法走索引常见的有如下9种情况：&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;统计信息不准确&lt;/li&gt;
  &lt;li&gt;索引列的值允许为NULL&lt;/li&gt;
  &lt;li&gt;谓词使用了不等于（&amp;lt;&amp;gt;, !=）&lt;/li&gt;
  &lt;li&gt;LIKE前通配或全通配的查询&lt;/li&gt;
  &lt;li&gt;索引列使用了函数、数学运算、其它表达式等&lt;/li&gt;
  &lt;li&gt;使用了隐式类型转换&lt;/li&gt;
  &lt;li&gt;查询转换失败&lt;/li&gt;
  &lt;li&gt;左右字段编码不同&lt;/li&gt;
  &lt;li&gt;其它语句逻辑原因&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;img src=&quot;/images/people/jiangyong.jpg&quot; alt=&quot;王江勇&quot; title=&quot;王江勇&quot; /&gt;&lt;/p&gt;

&lt;blockquote&gt;

  &lt;p&gt;&lt;small&gt;本文总阅读量&lt;span id=&quot;busuanzi_value_page_pv&quot;&gt;&lt;/span&gt;次&lt;/small&gt;&lt;/p&gt;
&lt;/blockquote&gt;
</description>
        <pubDate>Fri, 30 Mar 2018 10:16:17 +0800</pubDate>
        <link>http://localhost:4000/2018/03/30/mysql-index-failure.html</link>
        <guid isPermaLink="true">http://localhost:4000/2018/03/30/mysql-index-failure.html</guid>
        
        
        <category>数据库</category>
        
      </item>
    
  </channel>
</rss>
